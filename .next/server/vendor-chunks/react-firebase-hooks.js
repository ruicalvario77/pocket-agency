"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/react-firebase-hooks";
exports.ids = ["vendor-chunks/react-firebase-hooks"];
exports.modules = {

/***/ "(ssr)/./node_modules/react-firebase-hooks/auth/dist/index.esm.js":
/*!******************************************************************!*\
  !*** ./node_modules/react-firebase-hooks/auth/dist/index.esm.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useAuthState: () => (/* binding */ useAuthState),\n/* harmony export */   useCreateUserWithEmailAndPassword: () => (/* binding */ useCreateUserWithEmailAndPassword),\n/* harmony export */   useDeleteUser: () => (/* binding */ useDeleteUser),\n/* harmony export */   useIdToken: () => (/* binding */ useIdToken),\n/* harmony export */   useSendEmailVerification: () => (/* binding */ useSendEmailVerification),\n/* harmony export */   useSendPasswordResetEmail: () => (/* binding */ useSendPasswordResetEmail),\n/* harmony export */   useSendSignInLinkToEmail: () => (/* binding */ useSendSignInLinkToEmail),\n/* harmony export */   useSignInWithApple: () => (/* binding */ useSignInWithApple),\n/* harmony export */   useSignInWithEmailAndPassword: () => (/* binding */ useSignInWithEmailAndPassword),\n/* harmony export */   useSignInWithEmailLink: () => (/* binding */ useSignInWithEmailLink),\n/* harmony export */   useSignInWithFacebook: () => (/* binding */ useSignInWithFacebook),\n/* harmony export */   useSignInWithGithub: () => (/* binding */ useSignInWithGithub),\n/* harmony export */   useSignInWithGoogle: () => (/* binding */ useSignInWithGoogle),\n/* harmony export */   useSignInWithMicrosoft: () => (/* binding */ useSignInWithMicrosoft),\n/* harmony export */   useSignInWithTwitter: () => (/* binding */ useSignInWithTwitter),\n/* harmony export */   useSignInWithYahoo: () => (/* binding */ useSignInWithYahoo),\n/* harmony export */   useSignOut: () => (/* binding */ useSignOut),\n/* harmony export */   useUpdateEmail: () => (/* binding */ useUpdateEmail),\n/* harmony export */   useUpdatePassword: () => (/* binding */ useUpdatePassword),\n/* harmony export */   useUpdateProfile: () => (/* binding */ useUpdateProfile),\n/* harmony export */   useVerifyBeforeUpdateEmail: () => (/* binding */ useVerifyBeforeUpdateEmail)\n/* harmony export */ });\n/* harmony import */ var firebase_auth__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! firebase/auth */ \"(ssr)/./node_modules/firebase/auth/dist/index.mjs\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n\n\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n\r\nfunction __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nfunction __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\n\nvar defaultState = function (defaultValue) {\r\n    return {\r\n        loading: defaultValue === undefined || defaultValue === null,\r\n        value: defaultValue,\r\n    };\r\n};\r\nvar reducer = function () { return function (state, action) {\r\n    switch (action.type) {\r\n        case 'error':\r\n            return __assign(__assign({}, state), { error: action.error, loading: false, value: undefined });\r\n        case 'reset':\r\n            return defaultState(action.defaultValue);\r\n        case 'value':\r\n            return __assign(__assign({}, state), { error: undefined, loading: false, value: action.value });\r\n        default:\r\n            return state;\r\n    }\r\n}; };\r\nvar useLoadingValue = (function (getDefaultValue) {\r\n    var defaultValue = getDefaultValue ? getDefaultValue() : undefined;\r\n    var _a = (0,react__WEBPACK_IMPORTED_MODULE_1__.useReducer)(reducer(), defaultState(defaultValue)), state = _a[0], dispatch = _a[1];\r\n    var reset = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(function () {\r\n        var defaultValue = getDefaultValue ? getDefaultValue() : undefined;\r\n        dispatch({ type: 'reset', defaultValue: defaultValue });\r\n    }, [getDefaultValue]);\r\n    var setError = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(function (error) {\r\n        dispatch({ type: 'error', error: error });\r\n    }, []);\r\n    var setValue = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(function (value) {\r\n        dispatch({ type: 'value', value: value });\r\n    }, []);\r\n    return (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(function () { return ({\r\n        error: state.error,\r\n        loading: state.loading,\r\n        reset: reset,\r\n        setError: setError,\r\n        setValue: setValue,\r\n        value: state.value,\r\n    }); }, [state.error, state.loading, reset, setError, setValue, state.value]);\r\n});\n\nvar useAuthState = (function (auth, options) {\r\n    var _a = useLoadingValue(function () { return auth.currentUser; }), error = _a.error, loading = _a.loading, setError = _a.setError, setValue = _a.setValue, value = _a.value;\r\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(function () {\r\n        var listener = (0,firebase_auth__WEBPACK_IMPORTED_MODULE_0__.onAuthStateChanged)(auth, function (user) { return __awaiter(void 0, void 0, void 0, function () {\r\n            var e_1;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (!(options === null || options === void 0 ? void 0 : options.onUserChanged)) return [3 /*break*/, 4];\r\n                        _a.label = 1;\r\n                    case 1:\r\n                        _a.trys.push([1, 3, , 4]);\r\n                        return [4 /*yield*/, options.onUserChanged(user)];\r\n                    case 2:\r\n                        _a.sent();\r\n                        return [3 /*break*/, 4];\r\n                    case 3:\r\n                        e_1 = _a.sent();\r\n                        setError(e_1);\r\n                        return [3 /*break*/, 4];\r\n                    case 4:\r\n                        setValue(user);\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        }); }, setError);\r\n        return function () {\r\n            listener();\r\n        };\r\n    }, [auth]);\r\n    return [value, loading, error];\r\n});\n\nvar useCreateUserWithEmailAndPassword = (function (auth, options) {\r\n    var _a = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(), error = _a[0], setError = _a[1];\r\n    var _b = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(), registeredUser = _b[0], setRegisteredUser = _b[1];\r\n    var _c = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false), loading = _c[0], setLoading = _c[1];\r\n    var createUserWithEmailAndPassword$1 = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(function (email, password) { return __awaiter(void 0, void 0, void 0, function () {\r\n        var user, error_1;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    setLoading(true);\r\n                    setError(undefined);\r\n                    _a.label = 1;\r\n                case 1:\r\n                    _a.trys.push([1, 5, 6, 7]);\r\n                    return [4 /*yield*/, (0,firebase_auth__WEBPACK_IMPORTED_MODULE_0__.createUserWithEmailAndPassword)(auth, email, password)];\r\n                case 2:\r\n                    user = _a.sent();\r\n                    if (!(options && options.sendEmailVerification && user.user)) return [3 /*break*/, 4];\r\n                    return [4 /*yield*/, (0,firebase_auth__WEBPACK_IMPORTED_MODULE_0__.sendEmailVerification)(user.user, options.emailVerificationOptions)];\r\n                case 3:\r\n                    _a.sent();\r\n                    _a.label = 4;\r\n                case 4:\r\n                    setRegisteredUser(user);\r\n                    return [2 /*return*/, user];\r\n                case 5:\r\n                    error_1 = _a.sent();\r\n                    setError(error_1);\r\n                    return [3 /*break*/, 7];\r\n                case 6:\r\n                    setLoading(false);\r\n                    return [7 /*endfinally*/];\r\n                case 7: return [2 /*return*/];\r\n            }\r\n        });\r\n    }); }, [auth, options]);\r\n    return [createUserWithEmailAndPassword$1, registeredUser, loading, error];\r\n});\n\nvar useDeleteUser = (function (auth) {\r\n    var _a = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(), error = _a[0], setError = _a[1];\r\n    var _b = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false), loading = _b[0], setLoading = _b[1];\r\n    var deleteUser = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(function () { return __awaiter(void 0, void 0, void 0, function () {\r\n        var err_1;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    setLoading(true);\r\n                    setError(undefined);\r\n                    _a.label = 1;\r\n                case 1:\r\n                    _a.trys.push([1, 5, 6, 7]);\r\n                    if (!auth.currentUser) return [3 /*break*/, 3];\r\n                    return [4 /*yield*/, auth.currentUser.delete()];\r\n                case 2:\r\n                    _a.sent();\r\n                    return [2 /*return*/, true];\r\n                case 3: throw new Error('No user is logged in');\r\n                case 4: return [3 /*break*/, 7];\r\n                case 5:\r\n                    err_1 = _a.sent();\r\n                    setError(err_1);\r\n                    return [2 /*return*/, false];\r\n                case 6:\r\n                    setLoading(false);\r\n                    return [7 /*endfinally*/];\r\n                case 7: return [2 /*return*/];\r\n            }\r\n        });\r\n    }); }, [auth]);\r\n    return [deleteUser, loading, error];\r\n});\n\nvar useSendEmailVerification = (function (auth) {\r\n    var _a = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(), error = _a[0], setError = _a[1];\r\n    var _b = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false), loading = _b[0], setLoading = _b[1];\r\n    var sendEmailVerification$1 = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(function () { return __awaiter(void 0, void 0, void 0, function () {\r\n        var err_1;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    setLoading(true);\r\n                    setError(undefined);\r\n                    _a.label = 1;\r\n                case 1:\r\n                    _a.trys.push([1, 5, 6, 7]);\r\n                    if (!auth.currentUser) return [3 /*break*/, 3];\r\n                    return [4 /*yield*/, (0,firebase_auth__WEBPACK_IMPORTED_MODULE_0__.sendEmailVerification)(auth.currentUser)];\r\n                case 2:\r\n                    _a.sent();\r\n                    return [2 /*return*/, true];\r\n                case 3: throw new Error('No user is logged in');\r\n                case 4: return [3 /*break*/, 7];\r\n                case 5:\r\n                    err_1 = _a.sent();\r\n                    setError(err_1);\r\n                    return [2 /*return*/, false];\r\n                case 6:\r\n                    setLoading(false);\r\n                    return [7 /*endfinally*/];\r\n                case 7: return [2 /*return*/];\r\n            }\r\n        });\r\n    }); }, [auth]);\r\n    return [sendEmailVerification$1, loading, error];\r\n});\n\nvar useSendPasswordResetEmail = (function (auth) {\r\n    var _a = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(), error = _a[0], setError = _a[1];\r\n    var _b = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false), loading = _b[0], setLoading = _b[1];\r\n    var sendPasswordResetEmail$1 = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(function (email, actionCodeSettings) { return __awaiter(void 0, void 0, void 0, function () {\r\n        var err_1;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    setLoading(true);\r\n                    setError(undefined);\r\n                    _a.label = 1;\r\n                case 1:\r\n                    _a.trys.push([1, 3, 4, 5]);\r\n                    return [4 /*yield*/, (0,firebase_auth__WEBPACK_IMPORTED_MODULE_0__.sendPasswordResetEmail)(auth, email, actionCodeSettings)];\r\n                case 2:\r\n                    _a.sent();\r\n                    return [2 /*return*/, true];\r\n                case 3:\r\n                    err_1 = _a.sent();\r\n                    setError(err_1);\r\n                    return [2 /*return*/, false];\r\n                case 4:\r\n                    setLoading(false);\r\n                    return [7 /*endfinally*/];\r\n                case 5: return [2 /*return*/];\r\n            }\r\n        });\r\n    }); }, [auth]);\r\n    return [sendPasswordResetEmail$1, loading, error];\r\n});\n\nvar useSendSignInLinkToEmail = (function (auth) {\r\n    var _a = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(), error = _a[0], setError = _a[1];\r\n    var _b = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false), loading = _b[0], setLoading = _b[1];\r\n    var sendSignInLinkToEmail$1 = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(function (email, actionCodeSettings) { return __awaiter(void 0, void 0, void 0, function () {\r\n        var err_1;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    setLoading(true);\r\n                    setError(undefined);\r\n                    _a.label = 1;\r\n                case 1:\r\n                    _a.trys.push([1, 3, 4, 5]);\r\n                    return [4 /*yield*/, (0,firebase_auth__WEBPACK_IMPORTED_MODULE_0__.sendSignInLinkToEmail)(auth, email, actionCodeSettings)];\r\n                case 2:\r\n                    _a.sent();\r\n                    return [2 /*return*/, true];\r\n                case 3:\r\n                    err_1 = _a.sent();\r\n                    setError(err_1);\r\n                    return [2 /*return*/, false];\r\n                case 4:\r\n                    setLoading(false);\r\n                    return [7 /*endfinally*/];\r\n                case 5: return [2 /*return*/];\r\n            }\r\n        });\r\n    }); }, [auth]);\r\n    return [sendSignInLinkToEmail$1, loading, error];\r\n});\n\nvar useSignInWithEmailAndPassword = (function (auth) {\r\n    var _a = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(), error = _a[0], setError = _a[1];\r\n    var _b = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(), loggedInUser = _b[0], setLoggedInUser = _b[1];\r\n    var _c = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false), loading = _c[0], setLoading = _c[1];\r\n    var signInWithEmailAndPassword$1 = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(function (email, password) { return __awaiter(void 0, void 0, void 0, function () {\r\n        var user, err_1;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    setLoading(true);\r\n                    setError(undefined);\r\n                    _a.label = 1;\r\n                case 1:\r\n                    _a.trys.push([1, 3, 4, 5]);\r\n                    return [4 /*yield*/, (0,firebase_auth__WEBPACK_IMPORTED_MODULE_0__.signInWithEmailAndPassword)(auth, email, password)];\r\n                case 2:\r\n                    user = _a.sent();\r\n                    setLoggedInUser(user);\r\n                    return [2 /*return*/, user];\r\n                case 3:\r\n                    err_1 = _a.sent();\r\n                    setError(err_1);\r\n                    return [3 /*break*/, 5];\r\n                case 4:\r\n                    setLoading(false);\r\n                    return [7 /*endfinally*/];\r\n                case 5: return [2 /*return*/];\r\n            }\r\n        });\r\n    }); }, [auth]);\r\n    return [signInWithEmailAndPassword$1, loggedInUser, loading, error];\r\n});\n\nvar useSignInWithEmailLink = (function (auth) {\r\n    var _a = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(), error = _a[0], setError = _a[1];\r\n    var _b = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(), loggedInUser = _b[0], setLoggedInUser = _b[1];\r\n    var _c = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false), loading = _c[0], setLoading = _c[1];\r\n    var signInWithEmailLink$1 = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(function (email, emailLink) { return __awaiter(void 0, void 0, void 0, function () {\r\n        var user, err_1;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    setLoading(true);\r\n                    setError(undefined);\r\n                    _a.label = 1;\r\n                case 1:\r\n                    _a.trys.push([1, 3, 4, 5]);\r\n                    return [4 /*yield*/, (0,firebase_auth__WEBPACK_IMPORTED_MODULE_0__.signInWithEmailLink)(auth, email, emailLink)];\r\n                case 2:\r\n                    user = _a.sent();\r\n                    setLoggedInUser(user);\r\n                    return [2 /*return*/, user];\r\n                case 3:\r\n                    err_1 = _a.sent();\r\n                    setError(err_1);\r\n                    return [3 /*break*/, 5];\r\n                case 4:\r\n                    setLoading(false);\r\n                    return [7 /*endfinally*/];\r\n                case 5: return [2 /*return*/];\r\n            }\r\n        });\r\n    }); }, [auth]);\r\n    return [signInWithEmailLink$1, loggedInUser, loading, error];\r\n});\n\nvar useSignInWithApple = function (auth) {\r\n    return useSignInWithOAuth(auth, 'apple.com');\r\n};\r\nvar useSignInWithFacebook = function (auth) {\r\n    var createFacebookAuthProvider = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(function (scopes, customOAuthParameters) {\r\n        var provider = new firebase_auth__WEBPACK_IMPORTED_MODULE_0__.FacebookAuthProvider();\r\n        if (scopes) {\r\n            scopes.forEach(function (scope) { return provider.addScope(scope); });\r\n        }\r\n        if (customOAuthParameters) {\r\n            provider.setCustomParameters(customOAuthParameters);\r\n        }\r\n        return provider;\r\n    }, []);\r\n    return useSignInWithPopup(auth, createFacebookAuthProvider);\r\n};\r\nvar useSignInWithGithub = function (auth) {\r\n    var createGithubAuthProvider = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(function (scopes, customOAuthParameters) {\r\n        var provider = new firebase_auth__WEBPACK_IMPORTED_MODULE_0__.GithubAuthProvider();\r\n        if (scopes) {\r\n            scopes.forEach(function (scope) { return provider.addScope(scope); });\r\n        }\r\n        if (customOAuthParameters) {\r\n            provider.setCustomParameters(customOAuthParameters);\r\n        }\r\n        return provider;\r\n    }, []);\r\n    return useSignInWithPopup(auth, createGithubAuthProvider);\r\n};\r\nvar useSignInWithGoogle = function (auth) {\r\n    var createGoogleAuthProvider = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(function (scopes, customOAuthParameters) {\r\n        var provider = new firebase_auth__WEBPACK_IMPORTED_MODULE_0__.GoogleAuthProvider();\r\n        if (scopes) {\r\n            scopes.forEach(function (scope) { return provider.addScope(scope); });\r\n        }\r\n        if (customOAuthParameters) {\r\n            provider.setCustomParameters(customOAuthParameters);\r\n        }\r\n        return provider;\r\n    }, []);\r\n    return useSignInWithPopup(auth, createGoogleAuthProvider);\r\n};\r\nvar useSignInWithMicrosoft = function (auth) {\r\n    return useSignInWithOAuth(auth, 'microsoft.com');\r\n};\r\nvar useSignInWithTwitter = function (auth) {\r\n    var createTwitterAuthProvider = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(function (scopes, customOAuthParameters) {\r\n        var provider = new firebase_auth__WEBPACK_IMPORTED_MODULE_0__.TwitterAuthProvider();\r\n        if (scopes) {\r\n            scopes.forEach(function (scope) { return provider.addScope(scope); });\r\n        }\r\n        if (customOAuthParameters) {\r\n            provider.setCustomParameters(customOAuthParameters);\r\n        }\r\n        return provider;\r\n    }, []);\r\n    return useSignInWithPopup(auth, createTwitterAuthProvider);\r\n};\r\nvar useSignInWithYahoo = function (auth) {\r\n    return useSignInWithOAuth(auth, 'yahoo.com');\r\n};\r\nvar useSignInWithOAuth = function (auth, providerId) {\r\n    var createOAuthProvider = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(function (scopes, customOAuthParameters) {\r\n        var provider = new firebase_auth__WEBPACK_IMPORTED_MODULE_0__.OAuthProvider(providerId);\r\n        if (scopes) {\r\n            scopes.forEach(function (scope) { return provider.addScope(scope); });\r\n        }\r\n        if (customOAuthParameters) {\r\n            provider.setCustomParameters(customOAuthParameters);\r\n        }\r\n        return provider;\r\n    }, [providerId]);\r\n    return useSignInWithPopup(auth, createOAuthProvider);\r\n};\r\nvar useSignInWithPopup = function (auth, createProvider) {\r\n    var _a = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(), error = _a[0], setError = _a[1];\r\n    var _b = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(), loggedInUser = _b[0], setLoggedInUser = _b[1];\r\n    var _c = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false), loading = _c[0], setLoading = _c[1];\r\n    var doSignInWithPopup = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(function (scopes, customOAuthParameters) { return __awaiter(void 0, void 0, void 0, function () {\r\n        var provider, user, err_1;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    setLoading(true);\r\n                    setError(undefined);\r\n                    _a.label = 1;\r\n                case 1:\r\n                    _a.trys.push([1, 3, 4, 5]);\r\n                    provider = createProvider(scopes, customOAuthParameters);\r\n                    return [4 /*yield*/, (0,firebase_auth__WEBPACK_IMPORTED_MODULE_0__.signInWithPopup)(auth, provider)];\r\n                case 2:\r\n                    user = _a.sent();\r\n                    setLoggedInUser(user);\r\n                    return [2 /*return*/, user];\r\n                case 3:\r\n                    err_1 = _a.sent();\r\n                    setError(err_1);\r\n                    return [3 /*break*/, 5];\r\n                case 4:\r\n                    setLoading(false);\r\n                    return [7 /*endfinally*/];\r\n                case 5: return [2 /*return*/];\r\n            }\r\n        });\r\n    }); }, [auth, createProvider]);\r\n    return [doSignInWithPopup, loggedInUser, loading, error];\r\n};\n\nvar useSignOut = (function (auth) {\r\n    var _a = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(), error = _a[0], setError = _a[1];\r\n    var _b = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false), loading = _b[0], setLoading = _b[1];\r\n    var signOut = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(function () { return __awaiter(void 0, void 0, void 0, function () {\r\n        var err_1;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    setLoading(true);\r\n                    setError(undefined);\r\n                    _a.label = 1;\r\n                case 1:\r\n                    _a.trys.push([1, 3, 4, 5]);\r\n                    return [4 /*yield*/, auth.signOut()];\r\n                case 2:\r\n                    _a.sent();\r\n                    return [2 /*return*/, true];\r\n                case 3:\r\n                    err_1 = _a.sent();\r\n                    setError(err_1);\r\n                    return [2 /*return*/, false];\r\n                case 4:\r\n                    setLoading(false);\r\n                    return [7 /*endfinally*/];\r\n                case 5: return [2 /*return*/];\r\n            }\r\n        });\r\n    }); }, [auth]);\r\n    return [signOut, loading, error];\r\n});\n\nvar useUpdateEmail = function (auth) {\r\n    var _a = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(), error = _a[0], setError = _a[1];\r\n    var _b = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false), loading = _b[0], setLoading = _b[1];\r\n    var updateEmail$1 = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(function (email) { return __awaiter(void 0, void 0, void 0, function () {\r\n        var err_1;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    setLoading(true);\r\n                    setError(undefined);\r\n                    _a.label = 1;\r\n                case 1:\r\n                    _a.trys.push([1, 5, 6, 7]);\r\n                    if (!auth.currentUser) return [3 /*break*/, 3];\r\n                    return [4 /*yield*/, (0,firebase_auth__WEBPACK_IMPORTED_MODULE_0__.updateEmail)(auth.currentUser, email)];\r\n                case 2:\r\n                    _a.sent();\r\n                    return [2 /*return*/, true];\r\n                case 3: throw new Error('No user is logged in');\r\n                case 4: return [3 /*break*/, 7];\r\n                case 5:\r\n                    err_1 = _a.sent();\r\n                    setError(err_1);\r\n                    return [2 /*return*/, false];\r\n                case 6:\r\n                    setLoading(false);\r\n                    return [7 /*endfinally*/];\r\n                case 7: return [2 /*return*/];\r\n            }\r\n        });\r\n    }); }, [auth]);\r\n    return [updateEmail$1, loading, error];\r\n};\r\nvar useUpdatePassword = function (auth) {\r\n    var _a = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(), error = _a[0], setError = _a[1];\r\n    var _b = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false), loading = _b[0], setLoading = _b[1];\r\n    var updatePassword$1 = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(function (password) { return __awaiter(void 0, void 0, void 0, function () {\r\n        var err_2;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    setLoading(true);\r\n                    setError(undefined);\r\n                    _a.label = 1;\r\n                case 1:\r\n                    _a.trys.push([1, 5, 6, 7]);\r\n                    if (!auth.currentUser) return [3 /*break*/, 3];\r\n                    return [4 /*yield*/, (0,firebase_auth__WEBPACK_IMPORTED_MODULE_0__.updatePassword)(auth.currentUser, password)];\r\n                case 2:\r\n                    _a.sent();\r\n                    return [2 /*return*/, true];\r\n                case 3: throw new Error('No user is logged in');\r\n                case 4: return [3 /*break*/, 7];\r\n                case 5:\r\n                    err_2 = _a.sent();\r\n                    setError(err_2);\r\n                    return [2 /*return*/, false];\r\n                case 6:\r\n                    setLoading(false);\r\n                    return [7 /*endfinally*/];\r\n                case 7: return [2 /*return*/];\r\n            }\r\n        });\r\n    }); }, [auth]);\r\n    return [updatePassword$1, loading, error];\r\n};\r\nvar useUpdateProfile = function (auth) {\r\n    var _a = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(), error = _a[0], setError = _a[1];\r\n    var _b = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false), loading = _b[0], setLoading = _b[1];\r\n    var updateProfile$1 = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(function (profile) { return __awaiter(void 0, void 0, void 0, function () {\r\n        var err_3;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    setLoading(true);\r\n                    setError(undefined);\r\n                    _a.label = 1;\r\n                case 1:\r\n                    _a.trys.push([1, 5, 6, 7]);\r\n                    if (!auth.currentUser) return [3 /*break*/, 3];\r\n                    return [4 /*yield*/, (0,firebase_auth__WEBPACK_IMPORTED_MODULE_0__.updateProfile)(auth.currentUser, profile)];\r\n                case 2:\r\n                    _a.sent();\r\n                    return [2 /*return*/, true];\r\n                case 3: throw new Error('No user is logged in');\r\n                case 4: return [3 /*break*/, 7];\r\n                case 5:\r\n                    err_3 = _a.sent();\r\n                    setError(err_3);\r\n                    return [2 /*return*/, false];\r\n                case 6:\r\n                    setLoading(false);\r\n                    return [7 /*endfinally*/];\r\n                case 7: return [2 /*return*/];\r\n            }\r\n        });\r\n    }); }, [auth]);\r\n    return [updateProfile$1, loading, error];\r\n};\r\nvar useVerifyBeforeUpdateEmail = function (auth) {\r\n    var _a = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(), error = _a[0], setError = _a[1];\r\n    var _b = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false), loading = _b[0], setLoading = _b[1];\r\n    var verifyBeforeUpdateEmail$1 = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(function (email, actionCodeSettings) { return __awaiter(void 0, void 0, void 0, function () {\r\n        var err_4;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    setLoading(true);\r\n                    setError(undefined);\r\n                    _a.label = 1;\r\n                case 1:\r\n                    _a.trys.push([1, 5, 6, 7]);\r\n                    if (!auth.currentUser) return [3 /*break*/, 3];\r\n                    return [4 /*yield*/, (0,firebase_auth__WEBPACK_IMPORTED_MODULE_0__.verifyBeforeUpdateEmail)(auth.currentUser, email, actionCodeSettings)];\r\n                case 2:\r\n                    _a.sent();\r\n                    return [2 /*return*/, true];\r\n                case 3: throw new Error('No user is logged in');\r\n                case 4: return [3 /*break*/, 7];\r\n                case 5:\r\n                    err_4 = _a.sent();\r\n                    setError(err_4);\r\n                    return [2 /*return*/, false];\r\n                case 6:\r\n                    setLoading(false);\r\n                    return [7 /*endfinally*/];\r\n                case 7: return [2 /*return*/];\r\n            }\r\n        });\r\n    }); }, [auth]);\r\n    return [verifyBeforeUpdateEmail$1, loading, error];\r\n};\n\nvar useIdToken = (function (auth, options) {\r\n    var _a = useLoadingValue(function () { return auth.currentUser; }), error = _a.error, loading = _a.loading, setError = _a.setError, setValue = _a.setValue, value = _a.value;\r\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(function () {\r\n        var listener = (0,firebase_auth__WEBPACK_IMPORTED_MODULE_0__.onIdTokenChanged)(auth, function (user) { return __awaiter(void 0, void 0, void 0, function () {\r\n            var e_1;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (!(options === null || options === void 0 ? void 0 : options.onUserChanged)) return [3 /*break*/, 4];\r\n                        _a.label = 1;\r\n                    case 1:\r\n                        _a.trys.push([1, 3, , 4]);\r\n                        return [4 /*yield*/, options.onUserChanged(user)];\r\n                    case 2:\r\n                        _a.sent();\r\n                        return [3 /*break*/, 4];\r\n                    case 3:\r\n                        e_1 = _a.sent();\r\n                        setError(e_1);\r\n                        return [3 /*break*/, 4];\r\n                    case 4:\r\n                        setValue(user);\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        }); }, setError);\r\n        return function () {\r\n            listener();\r\n        };\r\n    }, [auth]);\r\n    return [value, loading, error];\r\n});\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvcmVhY3QtZmlyZWJhc2UtaG9va3MvYXV0aC9kaXN0L2luZGV4LmVzbS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBb1o7QUFDdFU7O0FBRTlFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLCtEQUErRCxpQkFBaUI7QUFDNUc7QUFDQSxvQ0FBb0MsTUFBTSwrQkFBK0IsWUFBWTtBQUNyRixtQ0FBbUMsTUFBTSxtQ0FBbUMsWUFBWTtBQUN4RixnQ0FBZ0M7QUFDaEM7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsY0FBYyw2QkFBNkIsMEJBQTBCLGNBQWMscUJBQXFCO0FBQ3hHLGlCQUFpQixvREFBb0QscUVBQXFFLGNBQWM7QUFDeEosdUJBQXVCLHNCQUFzQjtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0M7QUFDeEMsbUNBQW1DLFNBQVM7QUFDNUMsbUNBQW1DLFdBQVcsVUFBVTtBQUN4RCwwQ0FBMEMsY0FBYztBQUN4RDtBQUNBLDhHQUE4RyxPQUFPO0FBQ3JILGlGQUFpRixpQkFBaUI7QUFDbEcseURBQXlELGdCQUFnQixRQUFRO0FBQ2pGLCtDQUErQyxnQkFBZ0IsZ0JBQWdCO0FBQy9FO0FBQ0Esa0NBQWtDO0FBQ2xDO0FBQ0E7QUFDQSxVQUFVLFlBQVksYUFBYSxTQUFTLFVBQVU7QUFDdEQsb0NBQW9DLFNBQVM7QUFDN0M7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaURBQWlELE9BQU87QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUyxJQUFJO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsQ0FBQzs7QUFFK2MiLCJzb3VyY2VzIjpbIi93b3Jrc3BhY2VzL3BvY2tldC1hZ2VuY3kvZnJvbnRlbmQvbm9kZV9tb2R1bGVzL3JlYWN0LWZpcmViYXNlLWhvb2tzL2F1dGgvZGlzdC9pbmRleC5lc20uanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgb25BdXRoU3RhdGVDaGFuZ2VkLCBzZW5kRW1haWxWZXJpZmljYXRpb24sIGNyZWF0ZVVzZXJXaXRoRW1haWxBbmRQYXNzd29yZCwgc2VuZFBhc3N3b3JkUmVzZXRFbWFpbCwgc2VuZFNpZ25JbkxpbmtUb0VtYWlsLCBzaWduSW5XaXRoRW1haWxBbmRQYXNzd29yZCwgc2lnbkluV2l0aEVtYWlsTGluaywgRmFjZWJvb2tBdXRoUHJvdmlkZXIsIEdpdGh1YkF1dGhQcm92aWRlciwgR29vZ2xlQXV0aFByb3ZpZGVyLCBUd2l0dGVyQXV0aFByb3ZpZGVyLCBPQXV0aFByb3ZpZGVyLCBzaWduSW5XaXRoUG9wdXAsIHVwZGF0ZUVtYWlsLCB1cGRhdGVQYXNzd29yZCwgdXBkYXRlUHJvZmlsZSwgdmVyaWZ5QmVmb3JlVXBkYXRlRW1haWwsIG9uSWRUb2tlbkNoYW5nZWQgfSBmcm9tICdmaXJlYmFzZS9hdXRoJztcbmltcG9ydCB7IHVzZU1lbW8sIHVzZVJlZHVjZXIsIHVzZUNhbGxiYWNrLCB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuXG4vKiEgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uXHJcblxyXG5QZXJtaXNzaW9uIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBhbmQvb3IgZGlzdHJpYnV0ZSB0aGlzIHNvZnR3YXJlIGZvciBhbnlcclxucHVycG9zZSB3aXRoIG9yIHdpdGhvdXQgZmVlIGlzIGhlcmVieSBncmFudGVkLlxyXG5cclxuVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiBBTkQgVEhFIEFVVEhPUiBESVNDTEFJTVMgQUxMIFdBUlJBTlRJRVMgV0lUSFxyXG5SRUdBUkQgVE8gVEhJUyBTT0ZUV0FSRSBJTkNMVURJTkcgQUxMIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFlcclxuQU5EIEZJVE5FU1MuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1IgQkUgTElBQkxFIEZPUiBBTlkgU1BFQ0lBTCwgRElSRUNULFxyXG5JTkRJUkVDVCwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTIE9SIEFOWSBEQU1BR0VTIFdIQVRTT0VWRVIgUkVTVUxUSU5HIEZST01cclxuTE9TUyBPRiBVU0UsIERBVEEgT1IgUFJPRklUUywgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIE5FR0xJR0VOQ0UgT1JcclxuT1RIRVIgVE9SVElPVVMgQUNUSU9OLCBBUklTSU5HIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFVTRSBPUlxyXG5QRVJGT1JNQU5DRSBPRiBUSElTIFNPRlRXQVJFLlxyXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqL1xyXG5cclxuZnVuY3Rpb24gX19hd2FpdGVyKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xyXG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XHJcbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cclxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gX19nZW5lcmF0b3IodGhpc0FyZywgYm9keSkge1xyXG4gICAgdmFyIF8gPSB7IGxhYmVsOiAwLCBzZW50OiBmdW5jdGlvbigpIHsgaWYgKHRbMF0gJiAxKSB0aHJvdyB0WzFdOyByZXR1cm4gdFsxXTsgfSwgdHJ5czogW10sIG9wczogW10gfSwgZiwgeSwgdCwgZztcclxuICAgIHJldHVybiBnID0geyBuZXh0OiB2ZXJiKDApLCBcInRocm93XCI6IHZlcmIoMSksIFwicmV0dXJuXCI6IHZlcmIoMikgfSwgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIChnW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0pLCBnO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IHJldHVybiBmdW5jdGlvbiAodikgeyByZXR1cm4gc3RlcChbbiwgdl0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzdGVwKG9wKSB7XHJcbiAgICAgICAgaWYgKGYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuXCIpO1xyXG4gICAgICAgIHdoaWxlIChfKSB0cnkge1xyXG4gICAgICAgICAgICBpZiAoZiA9IDEsIHkgJiYgKHQgPSBvcFswXSAmIDIgPyB5W1wicmV0dXJuXCJdIDogb3BbMF0gPyB5W1widGhyb3dcIl0gfHwgKCh0ID0geVtcInJldHVyblwiXSkgJiYgdC5jYWxsKHkpLCAwKSA6IHkubmV4dCkgJiYgISh0ID0gdC5jYWxsKHksIG9wWzFdKSkuZG9uZSkgcmV0dXJuIHQ7XHJcbiAgICAgICAgICAgIGlmICh5ID0gMCwgdCkgb3AgPSBbb3BbMF0gJiAyLCB0LnZhbHVlXTtcclxuICAgICAgICAgICAgc3dpdGNoIChvcFswXSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOiBjYXNlIDE6IHQgPSBvcDsgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IF8ubGFiZWwrKzsgcmV0dXJuIHsgdmFsdWU6IG9wWzFdLCBkb25lOiBmYWxzZSB9O1xyXG4gICAgICAgICAgICAgICAgY2FzZSA1OiBfLmxhYmVsKys7IHkgPSBvcFsxXTsgb3AgPSBbMF07IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA3OiBvcCA9IF8ub3BzLnBvcCgpOyBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBpZiAoISh0ID0gXy50cnlzLCB0ID0gdC5sZW5ndGggPiAwICYmIHRbdC5sZW5ndGggLSAxXSkgJiYgKG9wWzBdID09PSA2IHx8IG9wWzBdID09PSAyKSkgeyBfID0gMDsgY29udGludWU7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDMgJiYgKCF0IHx8IChvcFsxXSA+IHRbMF0gJiYgb3BbMV0gPCB0WzNdKSkpIHsgXy5sYWJlbCA9IG9wWzFdOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gNiAmJiBfLmxhYmVsIDwgdFsxXSkgeyBfLmxhYmVsID0gdFsxXTsgdCA9IG9wOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7IF8ubGFiZWwgPSB0WzJdOyBfLm9wcy5wdXNoKG9wKTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodFsyXSkgXy5vcHMucG9wKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBvcCA9IGJvZHkuY2FsbCh0aGlzQXJnLCBfKTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7IG9wID0gWzYsIGVdOyB5ID0gMDsgfSBmaW5hbGx5IHsgZiA9IHQgPSAwOyB9XHJcbiAgICAgICAgaWYgKG9wWzBdICYgNSkgdGhyb3cgb3BbMV07IHJldHVybiB7IHZhbHVlOiBvcFswXSA/IG9wWzFdIDogdm9pZCAwLCBkb25lOiB0cnVlIH07XHJcbiAgICB9XHJcbn1cblxuLyohICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbkNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLlxyXG5cclxuUGVybWlzc2lvbiB0byB1c2UsIGNvcHksIG1vZGlmeSwgYW5kL29yIGRpc3RyaWJ1dGUgdGhpcyBzb2Z0d2FyZSBmb3IgYW55XHJcbnB1cnBvc2Ugd2l0aCBvciB3aXRob3V0IGZlZSBpcyBoZXJlYnkgZ3JhbnRlZC5cclxuXHJcblRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIgQU5EIFRIRSBBVVRIT1IgRElTQ0xBSU1TIEFMTCBXQVJSQU5USUVTIFdJVEhcclxuUkVHQVJEIFRPIFRISVMgU09GVFdBUkUgSU5DTFVESU5HIEFMTCBJTVBMSUVEIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZXHJcbkFORCBGSVRORVNTLiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SIEJFIExJQUJMRSBGT1IgQU5ZIFNQRUNJQUwsIERJUkVDVCxcclxuSU5ESVJFQ1QsIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyBPUiBBTlkgREFNQUdFUyBXSEFUU09FVkVSIFJFU1VMVElORyBGUk9NXHJcbkxPU1MgT0YgVVNFLCBEQVRBIE9SIFBST0ZJVFMsIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBORUdMSUdFTkNFIE9SXHJcbk9USEVSIFRPUlRJT1VTIEFDVElPTiwgQVJJU0lORyBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBVU0UgT1JcclxuUEVSRk9STUFOQ0UgT0YgVEhJUyBTT0ZUV0FSRS5cclxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cclxuXHJcbnZhciBfX2Fzc2lnbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uIF9fYXNzaWduKHQpIHtcclxuICAgICAgICBmb3IgKHZhciBzLCBpID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcclxuICAgICAgICAgICAgcyA9IGFyZ3VtZW50c1tpXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKSB0W3BdID0gc1twXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHQ7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbn07XG5cbnZhciBkZWZhdWx0U3RhdGUgPSBmdW5jdGlvbiAoZGVmYXVsdFZhbHVlKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGxvYWRpbmc6IGRlZmF1bHRWYWx1ZSA9PT0gdW5kZWZpbmVkIHx8IGRlZmF1bHRWYWx1ZSA9PT0gbnVsbCxcclxuICAgICAgICB2YWx1ZTogZGVmYXVsdFZhbHVlLFxyXG4gICAgfTtcclxufTtcclxudmFyIHJlZHVjZXIgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBmdW5jdGlvbiAoc3RhdGUsIGFjdGlvbikge1xyXG4gICAgc3dpdGNoIChhY3Rpb24udHlwZSkge1xyXG4gICAgICAgIGNhc2UgJ2Vycm9yJzpcclxuICAgICAgICAgICAgcmV0dXJuIF9fYXNzaWduKF9fYXNzaWduKHt9LCBzdGF0ZSksIHsgZXJyb3I6IGFjdGlvbi5lcnJvciwgbG9hZGluZzogZmFsc2UsIHZhbHVlOiB1bmRlZmluZWQgfSk7XHJcbiAgICAgICAgY2FzZSAncmVzZXQnOlxyXG4gICAgICAgICAgICByZXR1cm4gZGVmYXVsdFN0YXRlKGFjdGlvbi5kZWZhdWx0VmFsdWUpO1xyXG4gICAgICAgIGNhc2UgJ3ZhbHVlJzpcclxuICAgICAgICAgICAgcmV0dXJuIF9fYXNzaWduKF9fYXNzaWduKHt9LCBzdGF0ZSksIHsgZXJyb3I6IHVuZGVmaW5lZCwgbG9hZGluZzogZmFsc2UsIHZhbHVlOiBhY3Rpb24udmFsdWUgfSk7XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgcmV0dXJuIHN0YXRlO1xyXG4gICAgfVxyXG59OyB9O1xyXG52YXIgdXNlTG9hZGluZ1ZhbHVlID0gKGZ1bmN0aW9uIChnZXREZWZhdWx0VmFsdWUpIHtcclxuICAgIHZhciBkZWZhdWx0VmFsdWUgPSBnZXREZWZhdWx0VmFsdWUgPyBnZXREZWZhdWx0VmFsdWUoKSA6IHVuZGVmaW5lZDtcclxuICAgIHZhciBfYSA9IHVzZVJlZHVjZXIocmVkdWNlcigpLCBkZWZhdWx0U3RhdGUoZGVmYXVsdFZhbHVlKSksIHN0YXRlID0gX2FbMF0sIGRpc3BhdGNoID0gX2FbMV07XHJcbiAgICB2YXIgcmVzZXQgPSB1c2VDYWxsYmFjayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGRlZmF1bHRWYWx1ZSA9IGdldERlZmF1bHRWYWx1ZSA/IGdldERlZmF1bHRWYWx1ZSgpIDogdW5kZWZpbmVkO1xyXG4gICAgICAgIGRpc3BhdGNoKHsgdHlwZTogJ3Jlc2V0JywgZGVmYXVsdFZhbHVlOiBkZWZhdWx0VmFsdWUgfSk7XHJcbiAgICB9LCBbZ2V0RGVmYXVsdFZhbHVlXSk7XHJcbiAgICB2YXIgc2V0RXJyb3IgPSB1c2VDYWxsYmFjayhmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICBkaXNwYXRjaCh7IHR5cGU6ICdlcnJvcicsIGVycm9yOiBlcnJvciB9KTtcclxuICAgIH0sIFtdKTtcclxuICAgIHZhciBzZXRWYWx1ZSA9IHVzZUNhbGxiYWNrKGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgIGRpc3BhdGNoKHsgdHlwZTogJ3ZhbHVlJywgdmFsdWU6IHZhbHVlIH0pO1xyXG4gICAgfSwgW10pO1xyXG4gICAgcmV0dXJuIHVzZU1lbW8oZnVuY3Rpb24gKCkgeyByZXR1cm4gKHtcclxuICAgICAgICBlcnJvcjogc3RhdGUuZXJyb3IsXHJcbiAgICAgICAgbG9hZGluZzogc3RhdGUubG9hZGluZyxcclxuICAgICAgICByZXNldDogcmVzZXQsXHJcbiAgICAgICAgc2V0RXJyb3I6IHNldEVycm9yLFxyXG4gICAgICAgIHNldFZhbHVlOiBzZXRWYWx1ZSxcclxuICAgICAgICB2YWx1ZTogc3RhdGUudmFsdWUsXHJcbiAgICB9KTsgfSwgW3N0YXRlLmVycm9yLCBzdGF0ZS5sb2FkaW5nLCByZXNldCwgc2V0RXJyb3IsIHNldFZhbHVlLCBzdGF0ZS52YWx1ZV0pO1xyXG59KTtcblxudmFyIHVzZUF1dGhTdGF0ZSA9IChmdW5jdGlvbiAoYXV0aCwgb3B0aW9ucykge1xyXG4gICAgdmFyIF9hID0gdXNlTG9hZGluZ1ZhbHVlKGZ1bmN0aW9uICgpIHsgcmV0dXJuIGF1dGguY3VycmVudFVzZXI7IH0pLCBlcnJvciA9IF9hLmVycm9yLCBsb2FkaW5nID0gX2EubG9hZGluZywgc2V0RXJyb3IgPSBfYS5zZXRFcnJvciwgc2V0VmFsdWUgPSBfYS5zZXRWYWx1ZSwgdmFsdWUgPSBfYS52YWx1ZTtcclxuICAgIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGxpc3RlbmVyID0gb25BdXRoU3RhdGVDaGFuZ2VkKGF1dGgsIGZ1bmN0aW9uICh1c2VyKSB7IHJldHVybiBfX2F3YWl0ZXIodm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgZV8xO1xyXG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMub25Vc2VyQ2hhbmdlZCkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDRdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS50cnlzLnB1c2goWzEsIDMsICwgNF0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBvcHRpb25zLm9uVXNlckNoYW5nZWQodXNlcildO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA0XTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVfMSA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0RXJyb3IoZV8xKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNF07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRWYWx1ZSh1c2VyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTsgfSwgc2V0RXJyb3IpO1xyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGxpc3RlbmVyKCk7XHJcbiAgICAgICAgfTtcclxuICAgIH0sIFthdXRoXSk7XHJcbiAgICByZXR1cm4gW3ZhbHVlLCBsb2FkaW5nLCBlcnJvcl07XHJcbn0pO1xuXG52YXIgdXNlQ3JlYXRlVXNlcldpdGhFbWFpbEFuZFBhc3N3b3JkID0gKGZ1bmN0aW9uIChhdXRoLCBvcHRpb25zKSB7XHJcbiAgICB2YXIgX2EgPSB1c2VTdGF0ZSgpLCBlcnJvciA9IF9hWzBdLCBzZXRFcnJvciA9IF9hWzFdO1xyXG4gICAgdmFyIF9iID0gdXNlU3RhdGUoKSwgcmVnaXN0ZXJlZFVzZXIgPSBfYlswXSwgc2V0UmVnaXN0ZXJlZFVzZXIgPSBfYlsxXTtcclxuICAgIHZhciBfYyA9IHVzZVN0YXRlKGZhbHNlKSwgbG9hZGluZyA9IF9jWzBdLCBzZXRMb2FkaW5nID0gX2NbMV07XHJcbiAgICB2YXIgY3JlYXRlVXNlcldpdGhFbWFpbEFuZFBhc3N3b3JkJDEgPSB1c2VDYWxsYmFjayhmdW5jdGlvbiAoZW1haWwsIHBhc3N3b3JkKSB7IHJldHVybiBfX2F3YWl0ZXIodm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciB1c2VyLCBlcnJvcl8xO1xyXG4gICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgIHNldExvYWRpbmcodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0RXJyb3IodW5kZWZpbmVkKTtcclxuICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDE7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgX2EudHJ5cy5wdXNoKFsxLCA1LCA2LCA3XSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgY3JlYXRlVXNlcldpdGhFbWFpbEFuZFBhc3N3b3JkKGF1dGgsIGVtYWlsLCBwYXNzd29yZCldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgIHVzZXIgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEob3B0aW9ucyAmJiBvcHRpb25zLnNlbmRFbWFpbFZlcmlmaWNhdGlvbiAmJiB1c2VyLnVzZXIpKSByZXR1cm4gWzMgLypicmVhayovLCA0XTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBzZW5kRW1haWxWZXJpZmljYXRpb24odXNlci51c2VyLCBvcHRpb25zLmVtYWlsVmVyaWZpY2F0aW9uT3B0aW9ucyldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDQ7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQ6XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0UmVnaXN0ZXJlZFVzZXIodXNlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHVzZXJdO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA1OlxyXG4gICAgICAgICAgICAgICAgICAgIGVycm9yXzEgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0RXJyb3IoZXJyb3JfMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgN107XHJcbiAgICAgICAgICAgICAgICBjYXNlIDY6XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0TG9hZGluZyhmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs3IC8qZW5kZmluYWxseSovXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNzogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTsgfSwgW2F1dGgsIG9wdGlvbnNdKTtcclxuICAgIHJldHVybiBbY3JlYXRlVXNlcldpdGhFbWFpbEFuZFBhc3N3b3JkJDEsIHJlZ2lzdGVyZWRVc2VyLCBsb2FkaW5nLCBlcnJvcl07XHJcbn0pO1xuXG52YXIgdXNlRGVsZXRlVXNlciA9IChmdW5jdGlvbiAoYXV0aCkge1xyXG4gICAgdmFyIF9hID0gdXNlU3RhdGUoKSwgZXJyb3IgPSBfYVswXSwgc2V0RXJyb3IgPSBfYVsxXTtcclxuICAgIHZhciBfYiA9IHVzZVN0YXRlKGZhbHNlKSwgbG9hZGluZyA9IF9iWzBdLCBzZXRMb2FkaW5nID0gX2JbMV07XHJcbiAgICB2YXIgZGVsZXRlVXNlciA9IHVzZUNhbGxiYWNrKGZ1bmN0aW9uICgpIHsgcmV0dXJuIF9fYXdhaXRlcih2b2lkIDAsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGVycl8xO1xyXG4gICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgIHNldExvYWRpbmcodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0RXJyb3IodW5kZWZpbmVkKTtcclxuICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDE7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgX2EudHJ5cy5wdXNoKFsxLCA1LCA2LCA3XSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFhdXRoLmN1cnJlbnRVc2VyKSByZXR1cm4gWzMgLypicmVhayovLCAzXTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBhdXRoLmN1cnJlbnRVc2VyLmRlbGV0ZSgpXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRydWVdO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAzOiB0aHJvdyBuZXcgRXJyb3IoJ05vIHVzZXIgaXMgbG9nZ2VkIGluJyk7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IHJldHVybiBbMyAvKmJyZWFrKi8sIDddO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA1OlxyXG4gICAgICAgICAgICAgICAgICAgIGVycl8xID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNldEVycm9yKGVycl8xKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgZmFsc2VdO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA2OlxyXG4gICAgICAgICAgICAgICAgICAgIHNldExvYWRpbmcoZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNyAvKmVuZGZpbmFsbHkqL107XHJcbiAgICAgICAgICAgICAgICBjYXNlIDc6IHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7IH0sIFthdXRoXSk7XHJcbiAgICByZXR1cm4gW2RlbGV0ZVVzZXIsIGxvYWRpbmcsIGVycm9yXTtcclxufSk7XG5cbnZhciB1c2VTZW5kRW1haWxWZXJpZmljYXRpb24gPSAoZnVuY3Rpb24gKGF1dGgpIHtcclxuICAgIHZhciBfYSA9IHVzZVN0YXRlKCksIGVycm9yID0gX2FbMF0sIHNldEVycm9yID0gX2FbMV07XHJcbiAgICB2YXIgX2IgPSB1c2VTdGF0ZShmYWxzZSksIGxvYWRpbmcgPSBfYlswXSwgc2V0TG9hZGluZyA9IF9iWzFdO1xyXG4gICAgdmFyIHNlbmRFbWFpbFZlcmlmaWNhdGlvbiQxID0gdXNlQ2FsbGJhY2soZnVuY3Rpb24gKCkgeyByZXR1cm4gX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZXJyXzE7XHJcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0TG9hZGluZyh0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICBzZXRFcnJvcih1bmRlZmluZWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gMTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICBfYS50cnlzLnB1c2goWzEsIDUsIDYsIDddKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWF1dGguY3VycmVudFVzZXIpIHJldHVybiBbMyAvKmJyZWFrKi8sIDNdO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHNlbmRFbWFpbFZlcmlmaWNhdGlvbihhdXRoLmN1cnJlbnRVc2VyKV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0cnVlXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMzogdGhyb3cgbmV3IEVycm9yKCdObyB1c2VyIGlzIGxvZ2dlZCBpbicpO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA0OiByZXR1cm4gWzMgLypicmVhayovLCA3XTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNTpcclxuICAgICAgICAgICAgICAgICAgICBlcnJfMSA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICBzZXRFcnJvcihlcnJfMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIGZhbHNlXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNjpcclxuICAgICAgICAgICAgICAgICAgICBzZXRMb2FkaW5nKGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzcgLyplbmRmaW5hbGx5Ki9dO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA3OiByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pOyB9LCBbYXV0aF0pO1xyXG4gICAgcmV0dXJuIFtzZW5kRW1haWxWZXJpZmljYXRpb24kMSwgbG9hZGluZywgZXJyb3JdO1xyXG59KTtcblxudmFyIHVzZVNlbmRQYXNzd29yZFJlc2V0RW1haWwgPSAoZnVuY3Rpb24gKGF1dGgpIHtcclxuICAgIHZhciBfYSA9IHVzZVN0YXRlKCksIGVycm9yID0gX2FbMF0sIHNldEVycm9yID0gX2FbMV07XHJcbiAgICB2YXIgX2IgPSB1c2VTdGF0ZShmYWxzZSksIGxvYWRpbmcgPSBfYlswXSwgc2V0TG9hZGluZyA9IF9iWzFdO1xyXG4gICAgdmFyIHNlbmRQYXNzd29yZFJlc2V0RW1haWwkMSA9IHVzZUNhbGxiYWNrKGZ1bmN0aW9uIChlbWFpbCwgYWN0aW9uQ29kZVNldHRpbmdzKSB7IHJldHVybiBfX2F3YWl0ZXIodm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBlcnJfMTtcclxuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICBzZXRMb2FkaW5nKHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNldEVycm9yKHVuZGVmaW5lZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAxO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMSwgMywgNCwgNV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHNlbmRQYXNzd29yZFJlc2V0RW1haWwoYXV0aCwgZW1haWwsIGFjdGlvbkNvZGVTZXR0aW5ncyldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdHJ1ZV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgZXJyXzEgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0RXJyb3IoZXJyXzEpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBmYWxzZV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQ6XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0TG9hZGluZyhmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs3IC8qZW5kZmluYWxseSovXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNTogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTsgfSwgW2F1dGhdKTtcclxuICAgIHJldHVybiBbc2VuZFBhc3N3b3JkUmVzZXRFbWFpbCQxLCBsb2FkaW5nLCBlcnJvcl07XHJcbn0pO1xuXG52YXIgdXNlU2VuZFNpZ25JbkxpbmtUb0VtYWlsID0gKGZ1bmN0aW9uIChhdXRoKSB7XHJcbiAgICB2YXIgX2EgPSB1c2VTdGF0ZSgpLCBlcnJvciA9IF9hWzBdLCBzZXRFcnJvciA9IF9hWzFdO1xyXG4gICAgdmFyIF9iID0gdXNlU3RhdGUoZmFsc2UpLCBsb2FkaW5nID0gX2JbMF0sIHNldExvYWRpbmcgPSBfYlsxXTtcclxuICAgIHZhciBzZW5kU2lnbkluTGlua1RvRW1haWwkMSA9IHVzZUNhbGxiYWNrKGZ1bmN0aW9uIChlbWFpbCwgYWN0aW9uQ29kZVNldHRpbmdzKSB7IHJldHVybiBfX2F3YWl0ZXIodm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBlcnJfMTtcclxuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICBzZXRMb2FkaW5nKHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNldEVycm9yKHVuZGVmaW5lZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAxO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMSwgMywgNCwgNV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHNlbmRTaWduSW5MaW5rVG9FbWFpbChhdXRoLCBlbWFpbCwgYWN0aW9uQ29kZVNldHRpbmdzKV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0cnVlXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICBlcnJfMSA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICBzZXRFcnJvcihlcnJfMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIGZhbHNlXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNDpcclxuICAgICAgICAgICAgICAgICAgICBzZXRMb2FkaW5nKGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzcgLyplbmRmaW5hbGx5Ki9dO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA1OiByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pOyB9LCBbYXV0aF0pO1xyXG4gICAgcmV0dXJuIFtzZW5kU2lnbkluTGlua1RvRW1haWwkMSwgbG9hZGluZywgZXJyb3JdO1xyXG59KTtcblxudmFyIHVzZVNpZ25JbldpdGhFbWFpbEFuZFBhc3N3b3JkID0gKGZ1bmN0aW9uIChhdXRoKSB7XHJcbiAgICB2YXIgX2EgPSB1c2VTdGF0ZSgpLCBlcnJvciA9IF9hWzBdLCBzZXRFcnJvciA9IF9hWzFdO1xyXG4gICAgdmFyIF9iID0gdXNlU3RhdGUoKSwgbG9nZ2VkSW5Vc2VyID0gX2JbMF0sIHNldExvZ2dlZEluVXNlciA9IF9iWzFdO1xyXG4gICAgdmFyIF9jID0gdXNlU3RhdGUoZmFsc2UpLCBsb2FkaW5nID0gX2NbMF0sIHNldExvYWRpbmcgPSBfY1sxXTtcclxuICAgIHZhciBzaWduSW5XaXRoRW1haWxBbmRQYXNzd29yZCQxID0gdXNlQ2FsbGJhY2soZnVuY3Rpb24gKGVtYWlsLCBwYXNzd29yZCkgeyByZXR1cm4gX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgdXNlciwgZXJyXzE7XHJcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0TG9hZGluZyh0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICBzZXRFcnJvcih1bmRlZmluZWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gMTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICBfYS50cnlzLnB1c2goWzEsIDMsIDQsIDVdKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBzaWduSW5XaXRoRW1haWxBbmRQYXNzd29yZChhdXRoLCBlbWFpbCwgcGFzc3dvcmQpXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICB1c2VyID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNldExvZ2dlZEluVXNlcih1c2VyKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdXNlcl07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgZXJyXzEgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0RXJyb3IoZXJyXzEpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDVdO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICAgICAgICAgIHNldExvYWRpbmcoZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNyAvKmVuZGZpbmFsbHkqL107XHJcbiAgICAgICAgICAgICAgICBjYXNlIDU6IHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7IH0sIFthdXRoXSk7XHJcbiAgICByZXR1cm4gW3NpZ25JbldpdGhFbWFpbEFuZFBhc3N3b3JkJDEsIGxvZ2dlZEluVXNlciwgbG9hZGluZywgZXJyb3JdO1xyXG59KTtcblxudmFyIHVzZVNpZ25JbldpdGhFbWFpbExpbmsgPSAoZnVuY3Rpb24gKGF1dGgpIHtcclxuICAgIHZhciBfYSA9IHVzZVN0YXRlKCksIGVycm9yID0gX2FbMF0sIHNldEVycm9yID0gX2FbMV07XHJcbiAgICB2YXIgX2IgPSB1c2VTdGF0ZSgpLCBsb2dnZWRJblVzZXIgPSBfYlswXSwgc2V0TG9nZ2VkSW5Vc2VyID0gX2JbMV07XHJcbiAgICB2YXIgX2MgPSB1c2VTdGF0ZShmYWxzZSksIGxvYWRpbmcgPSBfY1swXSwgc2V0TG9hZGluZyA9IF9jWzFdO1xyXG4gICAgdmFyIHNpZ25JbldpdGhFbWFpbExpbmskMSA9IHVzZUNhbGxiYWNrKGZ1bmN0aW9uIChlbWFpbCwgZW1haWxMaW5rKSB7IHJldHVybiBfX2F3YWl0ZXIodm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciB1c2VyLCBlcnJfMTtcclxuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICBzZXRMb2FkaW5nKHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNldEVycm9yKHVuZGVmaW5lZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAxO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMSwgMywgNCwgNV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHNpZ25JbldpdGhFbWFpbExpbmsoYXV0aCwgZW1haWwsIGVtYWlsTGluayldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgIHVzZXIgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0TG9nZ2VkSW5Vc2VyKHVzZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB1c2VyXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICBlcnJfMSA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICBzZXRFcnJvcihlcnJfMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQ6XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0TG9hZGluZyhmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs3IC8qZW5kZmluYWxseSovXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNTogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTsgfSwgW2F1dGhdKTtcclxuICAgIHJldHVybiBbc2lnbkluV2l0aEVtYWlsTGluayQxLCBsb2dnZWRJblVzZXIsIGxvYWRpbmcsIGVycm9yXTtcclxufSk7XG5cbnZhciB1c2VTaWduSW5XaXRoQXBwbGUgPSBmdW5jdGlvbiAoYXV0aCkge1xyXG4gICAgcmV0dXJuIHVzZVNpZ25JbldpdGhPQXV0aChhdXRoLCAnYXBwbGUuY29tJyk7XHJcbn07XHJcbnZhciB1c2VTaWduSW5XaXRoRmFjZWJvb2sgPSBmdW5jdGlvbiAoYXV0aCkge1xyXG4gICAgdmFyIGNyZWF0ZUZhY2Vib29rQXV0aFByb3ZpZGVyID0gdXNlQ2FsbGJhY2soZnVuY3Rpb24gKHNjb3BlcywgY3VzdG9tT0F1dGhQYXJhbWV0ZXJzKSB7XHJcbiAgICAgICAgdmFyIHByb3ZpZGVyID0gbmV3IEZhY2Vib29rQXV0aFByb3ZpZGVyKCk7XHJcbiAgICAgICAgaWYgKHNjb3Blcykge1xyXG4gICAgICAgICAgICBzY29wZXMuZm9yRWFjaChmdW5jdGlvbiAoc2NvcGUpIHsgcmV0dXJuIHByb3ZpZGVyLmFkZFNjb3BlKHNjb3BlKTsgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChjdXN0b21PQXV0aFBhcmFtZXRlcnMpIHtcclxuICAgICAgICAgICAgcHJvdmlkZXIuc2V0Q3VzdG9tUGFyYW1ldGVycyhjdXN0b21PQXV0aFBhcmFtZXRlcnMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcHJvdmlkZXI7XHJcbiAgICB9LCBbXSk7XHJcbiAgICByZXR1cm4gdXNlU2lnbkluV2l0aFBvcHVwKGF1dGgsIGNyZWF0ZUZhY2Vib29rQXV0aFByb3ZpZGVyKTtcclxufTtcclxudmFyIHVzZVNpZ25JbldpdGhHaXRodWIgPSBmdW5jdGlvbiAoYXV0aCkge1xyXG4gICAgdmFyIGNyZWF0ZUdpdGh1YkF1dGhQcm92aWRlciA9IHVzZUNhbGxiYWNrKGZ1bmN0aW9uIChzY29wZXMsIGN1c3RvbU9BdXRoUGFyYW1ldGVycykge1xyXG4gICAgICAgIHZhciBwcm92aWRlciA9IG5ldyBHaXRodWJBdXRoUHJvdmlkZXIoKTtcclxuICAgICAgICBpZiAoc2NvcGVzKSB7XHJcbiAgICAgICAgICAgIHNjb3Blcy5mb3JFYWNoKGZ1bmN0aW9uIChzY29wZSkgeyByZXR1cm4gcHJvdmlkZXIuYWRkU2NvcGUoc2NvcGUpOyB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGN1c3RvbU9BdXRoUGFyYW1ldGVycykge1xyXG4gICAgICAgICAgICBwcm92aWRlci5zZXRDdXN0b21QYXJhbWV0ZXJzKGN1c3RvbU9BdXRoUGFyYW1ldGVycyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBwcm92aWRlcjtcclxuICAgIH0sIFtdKTtcclxuICAgIHJldHVybiB1c2VTaWduSW5XaXRoUG9wdXAoYXV0aCwgY3JlYXRlR2l0aHViQXV0aFByb3ZpZGVyKTtcclxufTtcclxudmFyIHVzZVNpZ25JbldpdGhHb29nbGUgPSBmdW5jdGlvbiAoYXV0aCkge1xyXG4gICAgdmFyIGNyZWF0ZUdvb2dsZUF1dGhQcm92aWRlciA9IHVzZUNhbGxiYWNrKGZ1bmN0aW9uIChzY29wZXMsIGN1c3RvbU9BdXRoUGFyYW1ldGVycykge1xyXG4gICAgICAgIHZhciBwcm92aWRlciA9IG5ldyBHb29nbGVBdXRoUHJvdmlkZXIoKTtcclxuICAgICAgICBpZiAoc2NvcGVzKSB7XHJcbiAgICAgICAgICAgIHNjb3Blcy5mb3JFYWNoKGZ1bmN0aW9uIChzY29wZSkgeyByZXR1cm4gcHJvdmlkZXIuYWRkU2NvcGUoc2NvcGUpOyB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGN1c3RvbU9BdXRoUGFyYW1ldGVycykge1xyXG4gICAgICAgICAgICBwcm92aWRlci5zZXRDdXN0b21QYXJhbWV0ZXJzKGN1c3RvbU9BdXRoUGFyYW1ldGVycyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBwcm92aWRlcjtcclxuICAgIH0sIFtdKTtcclxuICAgIHJldHVybiB1c2VTaWduSW5XaXRoUG9wdXAoYXV0aCwgY3JlYXRlR29vZ2xlQXV0aFByb3ZpZGVyKTtcclxufTtcclxudmFyIHVzZVNpZ25JbldpdGhNaWNyb3NvZnQgPSBmdW5jdGlvbiAoYXV0aCkge1xyXG4gICAgcmV0dXJuIHVzZVNpZ25JbldpdGhPQXV0aChhdXRoLCAnbWljcm9zb2Z0LmNvbScpO1xyXG59O1xyXG52YXIgdXNlU2lnbkluV2l0aFR3aXR0ZXIgPSBmdW5jdGlvbiAoYXV0aCkge1xyXG4gICAgdmFyIGNyZWF0ZVR3aXR0ZXJBdXRoUHJvdmlkZXIgPSB1c2VDYWxsYmFjayhmdW5jdGlvbiAoc2NvcGVzLCBjdXN0b21PQXV0aFBhcmFtZXRlcnMpIHtcclxuICAgICAgICB2YXIgcHJvdmlkZXIgPSBuZXcgVHdpdHRlckF1dGhQcm92aWRlcigpO1xyXG4gICAgICAgIGlmIChzY29wZXMpIHtcclxuICAgICAgICAgICAgc2NvcGVzLmZvckVhY2goZnVuY3Rpb24gKHNjb3BlKSB7IHJldHVybiBwcm92aWRlci5hZGRTY29wZShzY29wZSk7IH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoY3VzdG9tT0F1dGhQYXJhbWV0ZXJzKSB7XHJcbiAgICAgICAgICAgIHByb3ZpZGVyLnNldEN1c3RvbVBhcmFtZXRlcnMoY3VzdG9tT0F1dGhQYXJhbWV0ZXJzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHByb3ZpZGVyO1xyXG4gICAgfSwgW10pO1xyXG4gICAgcmV0dXJuIHVzZVNpZ25JbldpdGhQb3B1cChhdXRoLCBjcmVhdGVUd2l0dGVyQXV0aFByb3ZpZGVyKTtcclxufTtcclxudmFyIHVzZVNpZ25JbldpdGhZYWhvbyA9IGZ1bmN0aW9uIChhdXRoKSB7XHJcbiAgICByZXR1cm4gdXNlU2lnbkluV2l0aE9BdXRoKGF1dGgsICd5YWhvby5jb20nKTtcclxufTtcclxudmFyIHVzZVNpZ25JbldpdGhPQXV0aCA9IGZ1bmN0aW9uIChhdXRoLCBwcm92aWRlcklkKSB7XHJcbiAgICB2YXIgY3JlYXRlT0F1dGhQcm92aWRlciA9IHVzZUNhbGxiYWNrKGZ1bmN0aW9uIChzY29wZXMsIGN1c3RvbU9BdXRoUGFyYW1ldGVycykge1xyXG4gICAgICAgIHZhciBwcm92aWRlciA9IG5ldyBPQXV0aFByb3ZpZGVyKHByb3ZpZGVySWQpO1xyXG4gICAgICAgIGlmIChzY29wZXMpIHtcclxuICAgICAgICAgICAgc2NvcGVzLmZvckVhY2goZnVuY3Rpb24gKHNjb3BlKSB7IHJldHVybiBwcm92aWRlci5hZGRTY29wZShzY29wZSk7IH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoY3VzdG9tT0F1dGhQYXJhbWV0ZXJzKSB7XHJcbiAgICAgICAgICAgIHByb3ZpZGVyLnNldEN1c3RvbVBhcmFtZXRlcnMoY3VzdG9tT0F1dGhQYXJhbWV0ZXJzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHByb3ZpZGVyO1xyXG4gICAgfSwgW3Byb3ZpZGVySWRdKTtcclxuICAgIHJldHVybiB1c2VTaWduSW5XaXRoUG9wdXAoYXV0aCwgY3JlYXRlT0F1dGhQcm92aWRlcik7XHJcbn07XHJcbnZhciB1c2VTaWduSW5XaXRoUG9wdXAgPSBmdW5jdGlvbiAoYXV0aCwgY3JlYXRlUHJvdmlkZXIpIHtcclxuICAgIHZhciBfYSA9IHVzZVN0YXRlKCksIGVycm9yID0gX2FbMF0sIHNldEVycm9yID0gX2FbMV07XHJcbiAgICB2YXIgX2IgPSB1c2VTdGF0ZSgpLCBsb2dnZWRJblVzZXIgPSBfYlswXSwgc2V0TG9nZ2VkSW5Vc2VyID0gX2JbMV07XHJcbiAgICB2YXIgX2MgPSB1c2VTdGF0ZShmYWxzZSksIGxvYWRpbmcgPSBfY1swXSwgc2V0TG9hZGluZyA9IF9jWzFdO1xyXG4gICAgdmFyIGRvU2lnbkluV2l0aFBvcHVwID0gdXNlQ2FsbGJhY2soZnVuY3Rpb24gKHNjb3BlcywgY3VzdG9tT0F1dGhQYXJhbWV0ZXJzKSB7IHJldHVybiBfX2F3YWl0ZXIodm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBwcm92aWRlciwgdXNlciwgZXJyXzE7XHJcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0TG9hZGluZyh0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICBzZXRFcnJvcih1bmRlZmluZWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gMTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICBfYS50cnlzLnB1c2goWzEsIDMsIDQsIDVdKTtcclxuICAgICAgICAgICAgICAgICAgICBwcm92aWRlciA9IGNyZWF0ZVByb3ZpZGVyKHNjb3BlcywgY3VzdG9tT0F1dGhQYXJhbWV0ZXJzKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBzaWduSW5XaXRoUG9wdXAoYXV0aCwgcHJvdmlkZXIpXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICB1c2VyID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNldExvZ2dlZEluVXNlcih1c2VyKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdXNlcl07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgZXJyXzEgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0RXJyb3IoZXJyXzEpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDVdO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICAgICAgICAgIHNldExvYWRpbmcoZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNyAvKmVuZGZpbmFsbHkqL107XHJcbiAgICAgICAgICAgICAgICBjYXNlIDU6IHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7IH0sIFthdXRoLCBjcmVhdGVQcm92aWRlcl0pO1xyXG4gICAgcmV0dXJuIFtkb1NpZ25JbldpdGhQb3B1cCwgbG9nZ2VkSW5Vc2VyLCBsb2FkaW5nLCBlcnJvcl07XHJcbn07XG5cbnZhciB1c2VTaWduT3V0ID0gKGZ1bmN0aW9uIChhdXRoKSB7XHJcbiAgICB2YXIgX2EgPSB1c2VTdGF0ZSgpLCBlcnJvciA9IF9hWzBdLCBzZXRFcnJvciA9IF9hWzFdO1xyXG4gICAgdmFyIF9iID0gdXNlU3RhdGUoZmFsc2UpLCBsb2FkaW5nID0gX2JbMF0sIHNldExvYWRpbmcgPSBfYlsxXTtcclxuICAgIHZhciBzaWduT3V0ID0gdXNlQ2FsbGJhY2soZnVuY3Rpb24gKCkgeyByZXR1cm4gX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZXJyXzE7XHJcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0TG9hZGluZyh0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICBzZXRFcnJvcih1bmRlZmluZWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gMTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICBfYS50cnlzLnB1c2goWzEsIDMsIDQsIDVdKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBhdXRoLnNpZ25PdXQoKV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0cnVlXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICBlcnJfMSA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICBzZXRFcnJvcihlcnJfMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIGZhbHNlXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNDpcclxuICAgICAgICAgICAgICAgICAgICBzZXRMb2FkaW5nKGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzcgLyplbmRmaW5hbGx5Ki9dO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA1OiByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pOyB9LCBbYXV0aF0pO1xyXG4gICAgcmV0dXJuIFtzaWduT3V0LCBsb2FkaW5nLCBlcnJvcl07XHJcbn0pO1xuXG52YXIgdXNlVXBkYXRlRW1haWwgPSBmdW5jdGlvbiAoYXV0aCkge1xyXG4gICAgdmFyIF9hID0gdXNlU3RhdGUoKSwgZXJyb3IgPSBfYVswXSwgc2V0RXJyb3IgPSBfYVsxXTtcclxuICAgIHZhciBfYiA9IHVzZVN0YXRlKGZhbHNlKSwgbG9hZGluZyA9IF9iWzBdLCBzZXRMb2FkaW5nID0gX2JbMV07XHJcbiAgICB2YXIgdXBkYXRlRW1haWwkMSA9IHVzZUNhbGxiYWNrKGZ1bmN0aW9uIChlbWFpbCkgeyByZXR1cm4gX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZXJyXzE7XHJcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0TG9hZGluZyh0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICBzZXRFcnJvcih1bmRlZmluZWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gMTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICBfYS50cnlzLnB1c2goWzEsIDUsIDYsIDddKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWF1dGguY3VycmVudFVzZXIpIHJldHVybiBbMyAvKmJyZWFrKi8sIDNdO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHVwZGF0ZUVtYWlsKGF1dGguY3VycmVudFVzZXIsIGVtYWlsKV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0cnVlXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMzogdGhyb3cgbmV3IEVycm9yKCdObyB1c2VyIGlzIGxvZ2dlZCBpbicpO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA0OiByZXR1cm4gWzMgLypicmVhayovLCA3XTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNTpcclxuICAgICAgICAgICAgICAgICAgICBlcnJfMSA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICBzZXRFcnJvcihlcnJfMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIGZhbHNlXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNjpcclxuICAgICAgICAgICAgICAgICAgICBzZXRMb2FkaW5nKGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzcgLyplbmRmaW5hbGx5Ki9dO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA3OiByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pOyB9LCBbYXV0aF0pO1xyXG4gICAgcmV0dXJuIFt1cGRhdGVFbWFpbCQxLCBsb2FkaW5nLCBlcnJvcl07XHJcbn07XHJcbnZhciB1c2VVcGRhdGVQYXNzd29yZCA9IGZ1bmN0aW9uIChhdXRoKSB7XHJcbiAgICB2YXIgX2EgPSB1c2VTdGF0ZSgpLCBlcnJvciA9IF9hWzBdLCBzZXRFcnJvciA9IF9hWzFdO1xyXG4gICAgdmFyIF9iID0gdXNlU3RhdGUoZmFsc2UpLCBsb2FkaW5nID0gX2JbMF0sIHNldExvYWRpbmcgPSBfYlsxXTtcclxuICAgIHZhciB1cGRhdGVQYXNzd29yZCQxID0gdXNlQ2FsbGJhY2soZnVuY3Rpb24gKHBhc3N3b3JkKSB7IHJldHVybiBfX2F3YWl0ZXIodm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBlcnJfMjtcclxuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICBzZXRMb2FkaW5nKHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNldEVycm9yKHVuZGVmaW5lZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAxO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMSwgNSwgNiwgN10pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghYXV0aC5jdXJyZW50VXNlcikgcmV0dXJuIFszIC8qYnJlYWsqLywgM107XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdXBkYXRlUGFzc3dvcmQoYXV0aC5jdXJyZW50VXNlciwgcGFzc3dvcmQpXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRydWVdO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAzOiB0aHJvdyBuZXcgRXJyb3IoJ05vIHVzZXIgaXMgbG9nZ2VkIGluJyk7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IHJldHVybiBbMyAvKmJyZWFrKi8sIDddO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA1OlxyXG4gICAgICAgICAgICAgICAgICAgIGVycl8yID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNldEVycm9yKGVycl8yKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgZmFsc2VdO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA2OlxyXG4gICAgICAgICAgICAgICAgICAgIHNldExvYWRpbmcoZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNyAvKmVuZGZpbmFsbHkqL107XHJcbiAgICAgICAgICAgICAgICBjYXNlIDc6IHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7IH0sIFthdXRoXSk7XHJcbiAgICByZXR1cm4gW3VwZGF0ZVBhc3N3b3JkJDEsIGxvYWRpbmcsIGVycm9yXTtcclxufTtcclxudmFyIHVzZVVwZGF0ZVByb2ZpbGUgPSBmdW5jdGlvbiAoYXV0aCkge1xyXG4gICAgdmFyIF9hID0gdXNlU3RhdGUoKSwgZXJyb3IgPSBfYVswXSwgc2V0RXJyb3IgPSBfYVsxXTtcclxuICAgIHZhciBfYiA9IHVzZVN0YXRlKGZhbHNlKSwgbG9hZGluZyA9IF9iWzBdLCBzZXRMb2FkaW5nID0gX2JbMV07XHJcbiAgICB2YXIgdXBkYXRlUHJvZmlsZSQxID0gdXNlQ2FsbGJhY2soZnVuY3Rpb24gKHByb2ZpbGUpIHsgcmV0dXJuIF9fYXdhaXRlcih2b2lkIDAsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGVycl8zO1xyXG4gICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgIHNldExvYWRpbmcodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0RXJyb3IodW5kZWZpbmVkKTtcclxuICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDE7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgX2EudHJ5cy5wdXNoKFsxLCA1LCA2LCA3XSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFhdXRoLmN1cnJlbnRVc2VyKSByZXR1cm4gWzMgLypicmVhayovLCAzXTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB1cGRhdGVQcm9maWxlKGF1dGguY3VycmVudFVzZXIsIHByb2ZpbGUpXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRydWVdO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAzOiB0aHJvdyBuZXcgRXJyb3IoJ05vIHVzZXIgaXMgbG9nZ2VkIGluJyk7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IHJldHVybiBbMyAvKmJyZWFrKi8sIDddO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA1OlxyXG4gICAgICAgICAgICAgICAgICAgIGVycl8zID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNldEVycm9yKGVycl8zKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgZmFsc2VdO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA2OlxyXG4gICAgICAgICAgICAgICAgICAgIHNldExvYWRpbmcoZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNyAvKmVuZGZpbmFsbHkqL107XHJcbiAgICAgICAgICAgICAgICBjYXNlIDc6IHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7IH0sIFthdXRoXSk7XHJcbiAgICByZXR1cm4gW3VwZGF0ZVByb2ZpbGUkMSwgbG9hZGluZywgZXJyb3JdO1xyXG59O1xyXG52YXIgdXNlVmVyaWZ5QmVmb3JlVXBkYXRlRW1haWwgPSBmdW5jdGlvbiAoYXV0aCkge1xyXG4gICAgdmFyIF9hID0gdXNlU3RhdGUoKSwgZXJyb3IgPSBfYVswXSwgc2V0RXJyb3IgPSBfYVsxXTtcclxuICAgIHZhciBfYiA9IHVzZVN0YXRlKGZhbHNlKSwgbG9hZGluZyA9IF9iWzBdLCBzZXRMb2FkaW5nID0gX2JbMV07XHJcbiAgICB2YXIgdmVyaWZ5QmVmb3JlVXBkYXRlRW1haWwkMSA9IHVzZUNhbGxiYWNrKGZ1bmN0aW9uIChlbWFpbCwgYWN0aW9uQ29kZVNldHRpbmdzKSB7IHJldHVybiBfX2F3YWl0ZXIodm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBlcnJfNDtcclxuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICBzZXRMb2FkaW5nKHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNldEVycm9yKHVuZGVmaW5lZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAxO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMSwgNSwgNiwgN10pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghYXV0aC5jdXJyZW50VXNlcikgcmV0dXJuIFszIC8qYnJlYWsqLywgM107XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdmVyaWZ5QmVmb3JlVXBkYXRlRW1haWwoYXV0aC5jdXJyZW50VXNlciwgZW1haWwsIGFjdGlvbkNvZGVTZXR0aW5ncyldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdHJ1ZV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDM6IHRocm93IG5ldyBFcnJvcignTm8gdXNlciBpcyBsb2dnZWQgaW4nKTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNDogcmV0dXJuIFszIC8qYnJlYWsqLywgN107XHJcbiAgICAgICAgICAgICAgICBjYXNlIDU6XHJcbiAgICAgICAgICAgICAgICAgICAgZXJyXzQgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0RXJyb3IoZXJyXzQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBmYWxzZV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDY6XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0TG9hZGluZyhmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs3IC8qZW5kZmluYWxseSovXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNzogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTsgfSwgW2F1dGhdKTtcclxuICAgIHJldHVybiBbdmVyaWZ5QmVmb3JlVXBkYXRlRW1haWwkMSwgbG9hZGluZywgZXJyb3JdO1xyXG59O1xuXG52YXIgdXNlSWRUb2tlbiA9IChmdW5jdGlvbiAoYXV0aCwgb3B0aW9ucykge1xyXG4gICAgdmFyIF9hID0gdXNlTG9hZGluZ1ZhbHVlKGZ1bmN0aW9uICgpIHsgcmV0dXJuIGF1dGguY3VycmVudFVzZXI7IH0pLCBlcnJvciA9IF9hLmVycm9yLCBsb2FkaW5nID0gX2EubG9hZGluZywgc2V0RXJyb3IgPSBfYS5zZXRFcnJvciwgc2V0VmFsdWUgPSBfYS5zZXRWYWx1ZSwgdmFsdWUgPSBfYS52YWx1ZTtcclxuICAgIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGxpc3RlbmVyID0gb25JZFRva2VuQ2hhbmdlZChhdXRoLCBmdW5jdGlvbiAodXNlcikgeyByZXR1cm4gX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGVfMTtcclxuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEob3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLm9uVXNlckNoYW5nZWQpKSByZXR1cm4gWzMgLypicmVhayovLCA0XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EudHJ5cy5wdXNoKFsxLCAzLCAsIDRdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgb3B0aW9ucy5vblVzZXJDaGFuZ2VkKHVzZXIpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNF07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlXzEgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldEVycm9yKGVfMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDRdO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0VmFsdWUodXNlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7IH0sIHNldEVycm9yKTtcclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBsaXN0ZW5lcigpO1xyXG4gICAgICAgIH07XHJcbiAgICB9LCBbYXV0aF0pO1xyXG4gICAgcmV0dXJuIFt2YWx1ZSwgbG9hZGluZywgZXJyb3JdO1xyXG59KTtcblxuZXhwb3J0IHsgdXNlQXV0aFN0YXRlLCB1c2VDcmVhdGVVc2VyV2l0aEVtYWlsQW5kUGFzc3dvcmQsIHVzZURlbGV0ZVVzZXIsIHVzZUlkVG9rZW4sIHVzZVNlbmRFbWFpbFZlcmlmaWNhdGlvbiwgdXNlU2VuZFBhc3N3b3JkUmVzZXRFbWFpbCwgdXNlU2VuZFNpZ25JbkxpbmtUb0VtYWlsLCB1c2VTaWduSW5XaXRoQXBwbGUsIHVzZVNpZ25JbldpdGhFbWFpbEFuZFBhc3N3b3JkLCB1c2VTaWduSW5XaXRoRW1haWxMaW5rLCB1c2VTaWduSW5XaXRoRmFjZWJvb2ssIHVzZVNpZ25JbldpdGhHaXRodWIsIHVzZVNpZ25JbldpdGhHb29nbGUsIHVzZVNpZ25JbldpdGhNaWNyb3NvZnQsIHVzZVNpZ25JbldpdGhUd2l0dGVyLCB1c2VTaWduSW5XaXRoWWFob28sIHVzZVNpZ25PdXQsIHVzZVVwZGF0ZUVtYWlsLCB1c2VVcGRhdGVQYXNzd29yZCwgdXNlVXBkYXRlUHJvZmlsZSwgdXNlVmVyaWZ5QmVmb3JlVXBkYXRlRW1haWwgfTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/react-firebase-hooks/auth/dist/index.esm.js\n");

/***/ })

};
;